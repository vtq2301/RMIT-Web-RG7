<!--
RMIT University Vietnam
Course: COSC2430 Web Programming
Semester: 2023A
Assessment: Assignment 2
Author: Ly Minh Hanh, Le Hoang Vinh Nghi
ID: s3979290, s3978216
Acknowledgement: Bootstrap (https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css), Google Fonts (https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap)
-->

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Product details</title>
    <link rel="stylesheet" href="product_order.css">
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  </head>
  <body>
    <!-- ORDER DETAILS -->
    <% if (order) { %> 
        <section class="order-details">
            <h2>Order Details</h2>
            
            <!-- Products -->
            <ul>
            <% order.products.forEach(function(product) { %>
                <li>
                    <h3><%= product.product.name %></h3>
                    <p><span>Quantity:</span> <%= product.quantity %></p>
                    <p><span>Price:</span> <%= product.itemPrice %></p>                
                </li>
                <hr>
            <% }); %>
            </ul>
            
            <div class="order-summary">
                <!-- Total Price -->
                <p><span>Total Price:</span> <%= order.totalPrice %></p>
                
                <!-- Customer Address -->
                <p><span>Address:</span> <%= order.customerAddress %></p>
                
                <!-- Shipper ID -->
                <p><span>Shipper ID:</span> <%= order.shipperID %></p>
                
                <!-- Created At -->
                <p><span>Created At:</span> <%= order.createdAt %></p>
            
                <!-- Status -->
                <div class="order-status">
                    <p><span>Status:</span> <%= order.status %></p>
                    <form action="/order/remove" method="post">
                        <input type="hidden" name="orderId" value="<%= order._id %>">
                        <select id="status" name="status">
                            <option value="active" <% if (order.status === 'active') { %>selected<% } %>>Active</option>
                            <option value="delivered" <% if (order.status === 'delivered') { %>selected<% } %>>Delivered</option>
                            <option value="cancelled" <% if (order.status === 'cancelled') { %>selected<% } %>>Cancelled</option>
                        </select>
                        <br>
                        <button type="submit" class="submit-button">Submit</button>
                    </form>
                </div>
            </div>
        </section>
        <% } else { %>
            <p>Nothing</p>  
        <% } %>
  </body>
      